---
layout: post
title: NYC Restaurant Map Health Grade
---
A while back I decided to learn ReactJS. A friend lent me his Udemy account and I worked through the lessons and did the course projects. After finishing the course, I wanted to try working on my own project without the hand-holding of an instructor. For that, I decided to do something with Open Data, which is data published by government entities.

For the project, I went with restaurant health grades. In NYC, the Department of Health and Mental Hygiene (DOHMH) assigns letter grades to restaurants depending on their sanitary conditions. Issues they report on, for example, are vermin control, food handling, and employee hygiene. This data is published through the Open Data portal.

Using this data, my goal is to display a map with markers of restaurants. Selecting these markers will display additional restaurant information as well as the inspeciton results. To avoid overwhelming the user with every single restaurant of the city, I narrowed the search result to be within 1 mile radius of the user.

### ETL
In the ETL (extract-transform-load) is where I extract the data from Open Data and store locally in my Postgresql database.
1. Bulk load all restaurants
2. Bulk load all inspections
3. Identify and mark all restaurants that closed down
3. Geocode latitude and longitude of restaurants using Google Maps API

### Flask server
I mainly use Flask to serve the API to my data and point to the static pages generated by ReactJS. The calculation for restaurants within an address' radius is also done by the server. Initially I used PostGIS to do the calculation, but because I'm cheap and using only free hostings (PostGIS extension needed $$$), I went with implementing the Haversine Formula.

### ReactJS static pages
This is the portion that gave me the most headaches - not because it was difficult, but mainly due to my inexperience. I tried different React libraries for Google Maps, which I found to be rather half-baked. In the end, I scrapped that idea and used Google Maps API directly. Life became much easier. Other than that, ReactJS is definitely very nice and simple to use. No wonder it is so popular.

### Heroku deployment
This was my first attempt at deploying to a cloud service. To do so, I needed to change various parts of my projects to point to new endpoints for both my database and API. I found necessary to split my project into production and development branches containing different configurations.

Check it out at [https://intense-dawn-57836.herokuapp.com/](https://intense-dawn-57836.herokuapp.com/)

Note: If the search bar is not working for you, chances are that I hit my Google API usage limit. Please try again tomorrow!